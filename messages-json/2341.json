{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":7192225,"authorName":"Ian Badcoe","from":"Ian Badcoe &lt;ian_badcoe@...&gt;","profile":"ian_badcoe","replyTo":"LIST","senderId":"4YgHW-iUJNXERHUUYfJXl_tVIwr18A_If-ayopAttZDx_SgXLnzWiFevBW0aW7hD2lG_hvhbjsYKjxCFl4coCTkcqekuh7Z1F6I","spamInfo":{"isSpam":false,"reason":"12"},"subject":"Continuous Species Control","postDate":"1129306731","msgId":2341,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PDYuMi4zLjQuMC4yMDA1MTAxNDExMjA1My4wMzM2ZWFiMEBwb3AubWFpbC55YWhvby5jby51az4="},"prevInTopic":0,"nextInTopic":2342,"prevInTime":2340,"nextInTime":2342,"topicId":2341,"numMessagesInTopic":11,"msgSnippet":"Hi,\n\tI ve got some speciation up and running nicely now in SLEAT.  As I \nam running continuously, speciation issues are a little difference \nfrom the","rawEmail":"Return-Path: &lt;ian_badcoe@...&gt;\r\nX-Sender: ian_badcoe@...\r\nX-Apparently-To: neat@yahoogroups.com\r\nReceived: (qmail 1466 invoked from network); 14 Oct 2005 16:16:09 -0000\r\nReceived: from unknown (66.218.66.218)\n  by m29.grp.scd.yahoo.com with QMQP; 14 Oct 2005 16:16:09 -0000\r\nReceived: from unknown (HELO smtp005.mail.ukl.yahoo.com) (217.12.11.36)\n  by mta3.grp.scd.yahoo.com with SMTP; 14 Oct 2005 16:16:09 -0000\r\nReceived: (qmail 1937 invoked from network); 14 Oct 2005 16:16:04 -0000\r\nReceived: from unknown (HELO ian2k.yahoo.co.uk) (ian?badcoe@212.159.73.108 with login)\n  by smtp005.mail.ukl.yahoo.com with SMTP; 14 Oct 2005 16:16:03 -0000\r\nMessage-Id: &lt;6.2.3.4.0.20051014112053.0336eab0@...&gt;\r\nX-Mailer: QUALCOMM Windows Eudora Version 6.2.3.4\r\nDate: Fri, 14 Oct 2005 17:18:51 +0100\r\nTo: neat@yahoogroups.com\r\nMime-Version: 1.0\r\nContent-Type: text/plain; charset=&quot;us-ascii&quot;; format=flowed\r\nX-eGroups-Msg-Info: 1:12:0:0\r\nFrom: Ian Badcoe &lt;ian_badcoe@...&gt;\r\nSubject: Continuous Species Control\r\nX-Yahoo-Group-Post: member; u=7192225; y=j-XTEt-DdzhvKOQGVUoJZ3ZJRocHcVNojfVO9OcJRcHhR5KvAA\r\nX-Yahoo-Profile: ian_badcoe\r\n\r\nHi,\n\tI&#39;ve got some speciation up and running nicely now in SLEAT.  As I \nam running continuously, speciation issues are a little difference \nfrom the generational  approach, but I didn&#39;t fancy Ken&#39;s technique \nof completely recomparing all individuals in every cycle.\n\n\t[[ 1 cycle = creating 1 new individual == 1 birth and 1 death]]\n\n\tSo I&#39;m adjusting the speciation threshold dynamically in every cycle \nto try and maintain a target number of species.  My initial take on this was:\n\n\tif (num_species &gt; target_species + species_range) {\n\t\tthreshold /= 1.001;\n\t}\n\n\tif (num_species &lt; target_species - species_range) {\n\t\tthreshold *= 1.001;\n\t}\n\n\tWhere I was setting target_species and species_range to 20 and 4 respectively.\n\n\tYou can see I&#39;ve got a degree of hysteresis in this, to try and stop \nit oscillating like mad.  And I&#39;m also adjusting the threshold \nproportionately to its magnitude (because I don&#39;t know, in advance, \nwhat sort of range will apply).  And I&#39;m adjusting it by very small \ndegrees - because a cycle represents only a very small change to the \npopulation (at least with my current population size of 1000).\n\n\tThis worked, in as much as the number of species didn&#39;t slam over \nonto either extreme and jam there.  But it also never settles and \ncontinually oscillates between too many and too few species.  The \nreason for this is the massive delay in the population responding to \nchanges in threshold.  In particular, when threshold is increase, the \ndelay before the number of species reduces is very large, because we \nare waiting for the final member of each species to die.\n\n\t--\n\n\tTo handle this better, I have come up with a scheme that I am quite proud of.\n\n\t- first, I calculate a decaying average of the current change to the \nnumber of species.  e.g. this is an average of recent changes to \nnum_species, weighted towards the more recent events:\n\n\tfloat dec_avg = (1 - decay_frac) * dec_avg + decay_frac * last_species_change;\n\n\tNote since only one individual is born and one individual dies in \neach cycle, last_change is always 1, 0, or -1.  decay_frac is \ntypically 1/100 or 1/200...\n\n\tThis number is an estimate of the overall trend in the species \nnumber over the last 200-500 cycles.\n\n\t- then I calculate how fast the species number would need to be \nchanging, if it was to arrive at the right value after some number of \nfurther cycles:\n\n\tfloat needed_change = (target_species - num_species) / recovery_time;\n\n\tI currently have recovery time set to 2000 (e.g. 2 &quot;generations&quot;) \nbut it used to work pretty well with 1000 as well.\n\n\t- by comparing the estimate current ate of change with the required \nrate of change, we get a measure of whether we are currently the \nright way.  And, more importantly, whether we are going at the right speed.\n\n\tfloat difference = dec_avg - needed_change;\n\n\t- now, buy looking at that value, we have a pretty direct measure of \nwhether the threshold is too high or too low:\n\n\tif (diff_needed_decaying &gt; 1/recovery_time) {\n\t\trd.m_fSpeciationThreshold *= 1.001f;\n\t}\n\n\tif (diff_needed_decaying &lt; -1/recovery_time) {\n\t\trd.m_fSpeciationThreshold /= 1.001f;\n\t}\n\n\tThe reason for using 1/recovery_time as the threshold, is that it is \nthe minimum error with which we can measure needed change (because we \ncannot count less than 1 species difference).  So if the difference \nis less than that, we do not know whether it is slightly too small or \nslightly too large.\n\n\t--\n\n\tAnd it works _really_ well!  Look at this log file:\n\n1995000)\tsp:27 st:33.806797 dc:-0.000968 nc:0.001500\t\n1996000)\tsp:28 st:29.451084 dc:-0.002020 nc:0.001000\t\n1997000)\tsp:29 st:34.696835 dc:0.001201 nc:0.000500\t\n1998000)\tsp:28 st:29.012831 dc:-0.000557 nc:0.001000\t\n1999000)\tsp:30 st:55.335571 dc:0.000381 nc:0.000000\t\n2000000)\tsp:29 st:34.317459 dc:-0.000710 nc:0.000500\t\n2000000)\tsp:29 st:34.283176 dc:-0.000706 nc:0.000500\t\n2001000)\tsp:30 st:27.931553 dc:-0.000058 nc:0.000000\t\n2002000)\tsp:30 st:27.681419 dc:0.001237 nc:0.000000\t\n2003000)\tsp:29 st:21.113169 dc:-0.000516 nc:0.000500\t\n2004000)\tsp:30 st:20.674639 dc:0.003918 nc:0.000000\t\n2005000)\tsp:29 st:23.875086 dc:0.001006 nc:0.000500\t\n2006000)\tsp:29 st:34.317459 dc:-0.002551 nc:0.000500\t\n2007000)\tsp:31 st:54.894875 dc:0.001962 nc:-0.000500\t\n2008000)\tsp:29 st:36.767696 dc:0.000702 nc:0.000500\t\n2009000)\tsp:31 st:59.762440 dc:0.001624 nc:-0.000500\t\n2010000)\tsp:31 st:48.109791 dc:0.004207 nc:-0.000500\t\n\ntarget species count was 30, dec_frac 1/200, recovery_time 2000\n\nsp -&gt;species count\nst -&gt; speciation threshold\ndc -&gt; decaying species change\nnc -&gt; needed change\n\n\tSometimes you can even see, if it is correcting a large error, that \nit sets an extreme threshold to bring it in quickly, and then gently \nbreaks the rate fo change to a halt as it approaches the target.  But \nI couldn&#39;t find an example of that right now.\n\n\tIan\n\nIn fifteen minutes, everybody will be in the future.\n\n\n\n\t\n\t\n\t\t\n___________________________________________________________ \nYahoo! Messenger - NEW crystal clear PC to PC calling worldwide with voicemail http://uk.messenger.yahoo.com\r\n\n"}}