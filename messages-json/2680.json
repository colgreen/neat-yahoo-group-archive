{"ygPerms":{"resourceCapabilityList":[{"resourceType":"GROUP","capabilities":[{"name":"READ"},{"name":"JOIN"}]},{"resourceType":"PHOTO","capabilities":[]},{"resourceType":"FILE","capabilities":[]},{"resourceType":"MEMBER","capabilities":[]},{"resourceType":"LINK","capabilities":[]},{"resourceType":"CALENDAR","capabilities":[]},{"resourceType":"DATABASE","capabilities":[]},{"resourceType":"POLL","capabilities":[]},{"resourceType":"MESSAGE","capabilities":[{"name":"READ"}]},{"resourceType":"PENDING_MESSAGE","capabilities":[]},{"resourceType":"ATTACHMENTS","capabilities":[{"name":"READ"}]},{"resourceType":"PHOTOMATIC_ALBUMS","capabilities":[]},{"resourceType":"MEMBERSHIP_TYPE","capabilities":[]},{"resourceType":"POST","capabilities":[{"name":"READ"}]},{"resourceType":"PIN","capabilities":[]}],"groupUrl":"groups.yahoo.com","intlCode":"us"},"comscore":"pageview_candidate","ygData":{"userId":221372007,"authorName":"petervermont","from":"&quot;petervermont&quot; &lt;pandrews@...&gt;","profile":"petervermont","replyTo":"LIST","senderId":"wvA9azSsagb9ZF_0pvat1_rTlbcb8svJsLGblHN3FbuZuPhU6pObNums3VEMWZY0vA6BQ2VDGWiHRfpIdYJJdOJCw7qwkytsUMrWJK3UzH9I","spamInfo":{"isSpam":false,"reason":"6"},"subject":"Re: Loss of most fit species in SharpNEAT?","postDate":"1153323912","msgId":2680,"canDelete":false,"contentTrasformed":false,"systemMessage":false,"headers":{"messageIdInHeader":"PGU5bGsyOCttbnQ4QGVHcm91cHMuY29tPg==","inReplyToHeader":"PGU5YnY4bitmMDJsQGVHcm91cHMuY29tPg=="},"prevInTopic":2672,"nextInTopic":0,"prevInTime":2679,"nextInTime":2681,"topicId":2663,"numMessagesInTopic":8,"msgSnippet":"Just wanted to report on Colin s change to prevent loss of BestGenome. I am running with a population of 150 with number of species allowed to vary between 5","rawEmail":"Return-Path: &lt;pandrews@...&gt;\r\nX-Sender: pandrews@...\r\nX-Apparently-To: neat@yahoogroups.com\r\nReceived: (qmail 75517 invoked from network); 19 Jul 2006 15:47:50 -0000\r\nReceived: from unknown (66.218.67.33)\n  by m37.grp.scd.yahoo.com with QMQP; 19 Jul 2006 15:47:50 -0000\r\nReceived: from unknown (HELO n18b.bullet.sc5.yahoo.com) (66.163.187.185)\n  by mta7.grp.scd.yahoo.com with SMTP; 19 Jul 2006 15:47:50 -0000\r\nReceived: from [66.163.187.123] by n18.bullet.sc5.yahoo.com with NNFMP; 19 Jul 2006 15:45:14 -0000\r\nReceived: from [66.218.69.2] by t4.bullet.sc5.yahoo.com with NNFMP; 19 Jul 2006 15:45:14 -0000\r\nReceived: from [66.218.66.68] by t2.bullet.scd.yahoo.com with NNFMP; 19 Jul 2006 15:45:14 -0000\r\nDate: Wed, 19 Jul 2006 15:45:12 -0000\r\nTo: neat@yahoogroups.com\r\nMessage-ID: &lt;e9lk28+mnt8@...&gt;\r\nIn-Reply-To: &lt;e9bv8n+f02l@...&gt;\r\nUser-Agent: eGroups-EW/0.82\r\nMIME-Version: 1.0\r\nContent-Type: text/plain; charset=&quot;ISO-8859-1&quot;\r\nContent-Transfer-Encoding: quoted-printable\r\nX-Mailer: Yahoo Groups Message Poster\r\nX-Yahoo-Newman-Property: groups-compose\r\nX-eGroups-Msg-Info: 1:6:0:0\r\nFrom: &quot;petervermont&quot; &lt;pandrews@...&gt;\r\nSubject: Re: Loss of most fit species in SharpNEAT?\r\nX-Yahoo-Group-Post: member; u=221372007; y=pzDjx221GHMhqEtCiIzSuv06yvjU6wdUWGdir6Lnd4tIYDvDwj_r\r\nX-Yahoo-Profile: petervermont\r\n\r\nJust wanted to report on Colin&#39;s change to prevent loss of BestGenome.\n\nI a=\r\nm running with a population of 150 with number of species allowed\nto vary b=\r\netween 5 and 30. It tends to be around 25-30.\n\nBasically the output window =\r\nshowed that Colin&#39;s code to cath this case\nwas exercised quite often (hundr=\r\neds of times).\n\nAt a population of 200, I saw the code hit only a few times=\r\n, when the\nnetwork was immature (not very fit).\n\nAt population 100 it was h=\r\nit extremely often.\n\nWhen I upped the population to 500, Colin&#39;s code was n=\r\no longer hit.\n\nThis seems to roughly match Colin&#39;s expectations but it seem=\r\ns clear\nthis is a worthwhile patch.\n\n\n--- In neat@yahoogroups.com, &quot;peterve=\r\nrmont&quot; &lt;pandrews@...&gt; wrote:\n&gt;\n&gt; Terrific! Thanks Colin.\n&gt; \n&gt;  I am running=\r\n with the new code now and will be able to\n&gt; confirm whether it fixes my or=\r\niginal issue after running for a few\nhours.\n&gt; \n&gt; As I mentioned, I initiall=\r\ny saw the loss of the best genome when\n&gt; running with more sensible setting=\r\ns so I suspect that it may happen\n&gt; more frequently than Colin suspects. If=\r\n I am correct it would be\n&gt; interesting to re-run some previous experiments=\r\n and see if the time to\n&gt;  reach a certain fitness is decreased.\n&gt; \n&gt; In or=\r\nder to tell when Colin&#39;s new code is being effective, on my local\n&gt; copy of=\r\n code, I added a Writeline statement so I could tell when the\n&gt; best genome=\r\n would previously have been removed.\n&gt; \n&gt; \n&gt; --- In neat@yahoogroups.com, C=\r\nolin Green &lt;cgreen@&gt; wrote:\n&gt; &gt;\n&gt; &gt; Hi Peter,\n&gt; &gt; \n&gt; &gt; Ok I was able to rec=\r\nreate the problem using the example you gave.\nJohn, \n&gt; &gt; yes it does seem t=\r\no be a problem caused by the re-speciation and the \n&gt; &gt; example Peter gave =\r\nexacerbated the problem by setting a mean species \n&gt; &gt; size that was just h=\r\nalf the population size, thus making the average \n&gt; &gt; species size just 2 (=\r\ngenomes). So when I calculate the target size of \n&gt; &gt; each species based on=\r\n the fitness of it&#39;s genomes I assumed that the \n&gt; &gt; species with the champ=\r\n in it would always get a target size &gt;0, but\n&gt; this \n&gt; &gt; isn&#39;t the case wh=\r\nen the mean species size is so small - due to\nrounding \n&gt; &gt; down to 0 probl=\r\nem. Also setting the min/max species threshold to the \n&gt; &gt; same value cause=\r\ns a lot of adding and removing of species to try to \n&gt; &gt; maintain the targe=\r\nt number of species.\n&gt; &gt; \n&gt; &gt;  I think I have a fix for this problem, altho=\r\nugh I would hope that it \n&gt; &gt; isn&#39;t a major issue anyway if the mean specie=\r\ns size is set to at\nleast \n&gt; &gt; say 15-20 and there is a gap between the two=\r\n species target size\n&gt; thresholds.\n&gt; &gt; \n&gt; &gt; Anyway try replacing EvolutionA=\r\nlgorithm.DetermineSpeciesTargetSize() \n&gt; &gt; function with the version below.=\r\n It test for the condition where the \n&gt; &gt; target or elitism size has been c=\r\nalculated to be 0 but the species \n&gt; &gt; contains the best genome.\n&gt; &gt; \n&gt; &gt; C=\r\nolin\n&gt; &gt; \n&gt; &gt; \n&gt; &gt;         private void DetermineSpeciesTargetSize()\n&gt; &gt;   =\r\n      {\n&gt; &gt;             foreach(Species species in pop.SpeciesTable.Values)=\r\n\n&gt; &gt;             {\n&gt; &gt;                 species.TargetSize =3D \n&gt; &gt; (int)Mat=\r\nh.Round((species.MeanFitness / pop.TotalSpeciesMeanFitness) * \n&gt; &gt; pop.Popu=\r\nlationSize);\n&gt; &gt; \n&gt; &gt;                 // Calculate how many elite genomes t=\r\no keep in the\nnext \n&gt; &gt; round. If this is a large number then we can only\n&gt;=\r\n &gt;                 // keep as many genomes as we have!\n&gt; &gt;                 =\r\nspecies.ElitistSize =3D Math.Min(species.Members.Count, \n&gt; &gt; (int)Math.Floo=\r\nr(species.TargetSize *\nneatParameters.elitismProportion));\n&gt; &gt;             =\r\n    if((species.TargetSize=3D=3D0 ||\nspecies.ElitistSize=3D=3D0) && \n&gt; &gt; sp=\r\necies.Members[0]=3D=3DbestGenome)\n&gt; &gt;                 {   // Ensure we don&#39;=\r\nt cull the species that contains \n&gt; &gt; the best genome!\n&gt; &gt;                 =\r\n    species.TargetSize =3D 1;\n&gt; &gt;                     species.ElitistSize =\r\n=3D 1;\n&gt; &gt;                 }\n&gt; &gt;                 else if(species.ElitistSiz=\r\ne=3D=3D0 && species.TargetSize\n&gt; &gt; 1)\n&gt; &gt;                 {    // If Elitis=\r\ntSize is calculated to be zero\nbut the \n&gt; &gt; TargetSize non-zero then keep j=\r\nust one genome.\n&gt; &gt;                     // If the the TargetSize is 1 then =\r\nwe can&#39;t\nreally \n&gt; &gt; do this since it would mean that no offspring would be=\r\n generated.\n&gt; &gt;                     // So we throw away the one member and =\r\nhope that\n&gt; the \n&gt; &gt; one offspring generated will be OK.\n&gt; &gt;               =\r\n      species.ElitistSize =3D 1;\n&gt; &gt;                 }\n&gt; &gt;             }\n&gt; =\r\n&gt;         }\n&gt; &gt;\n&gt;\n\n\n\n\n\n\n"}}